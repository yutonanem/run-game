<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>暇つぶしランゲーム</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style.css" />
    <link rel="manifest" href="./manifest.webmanifest" />
    <meta name="theme-color" content="#6ec9ff" />
  </head>
  <body>
    <div class="wrapper">
      <!-- ▼ ログインエリア ▼ -->
      <div id="login-area" class="login-area">
        <p class="login-title">ログイン</p>
        <input
          id="player-name-input"
          class="login-input"
          type="text"
          maxlength="16"
          placeholder="なまえを入力"
        />
        <button id="login-btn" class="login-btn">ゲームスタート</button>
      </div>

      <!-- ▼ ログイン済み情報 ▼ -->
      <div id="user-info" class="user-info" hidden>
        <span id="user-name-label"></span> さんでプレイ中
        <button id="logout-btn" class="logout-btn">ログアウト</button>
      </div>

      <h1>暇つぶしランゲーム</h1>
      <p class="desc">
        画面タップ or スペースキーでジャンプ！<br />
        段差につまずかずに、できるだけ長く走り続けよう🏃‍♀️✨
      </p>

      <canvas id="gameCanvas"></canvas>

      <div class="hud">
        <div>今回のタイム：<span id="current-time">0.00</span> 秒</div>
        <div>ベストタイム：<span id="best-time">0.00</span> 秒</div>
      </div>

      <div id="message" class="status"></div>
      <button id="restart-btn" class="restart-btn">もう一度</button>
    </div>

    <script src="./game.js"></script>

    <!-- PWA用 Service Worker 登録（すでにあったものを残しておく） -->
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker
            .register("/service-worker.js")
            .catch((err) => {
              console.log("Service Worker registration failed:", err);
            });
        });
      }
    </script>
  </body>
</html>
